<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<!--
Автор: vladimir_shi
Создал: 2025-09-18 (на основе существующих FXML)
Описание: FXML для редактора интерактивных схем.
- Основной холст (AnchorPane) для отображения и рисования схемы.
- Панель инструментов: режимы рисования и добавления приборов.
- ComboBox для выбора прибора из списка.
- Кнопки для действий: Сохранить, загрузить, новый.
-->

<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>
<BorderPane xmlns="http://javafx.com/javafx/23"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.kipia.management.kipia_management.controllers.SchemeEditorController">
    <!-- Верхняя панель: инструменты -->
    <top>
        <VBox spacing="10">
            <!-- Панель выбора схемы -->
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="Схема:" styleClass="scheme-label"/>
                <ComboBox fx:id="schemeComboBox" prefWidth="200"/>
                <Button fx:id="saveSchemeBtn" styleClass="save-scheme-button">
                    <graphic>
                        <ImageView fitWidth="24" fitHeight="24" pickOnBounds="true" preserveRatio="true">
                            <Image url="@../images/save.png"/>
                        </ImageView>
                    </graphic>
                    <tooltip>
                        <Tooltip text="Сохранить схему"/>
                    </tooltip>
                </Button>
            </HBox>
            <!-- Панель инструментов -->
            <HBox spacing="10" alignment="CENTER_LEFT">
            <ToolBar>
                <Button fx:id="selectToolBtn" styleClass="tool-button">
                    <graphic>
                        <ImageView fitWidth="24" fitHeight="24" pickOnBounds="true" preserveRatio="true">
                            <Image url="@../images/hand.png"/>
                        </ImageView>
                    </graphic>
                    <tooltip>
                        <Tooltip text="Выбрать фигуру"/>
                    </tooltip>
                </Button>
                <Button fx:id="undoBtn" styleClass="tool-button">
                    <graphic>
                        <ImageView fitWidth="24" fitHeight="24" pickOnBounds="true" preserveRatio="true">
                            <Image url="@../images/undo.png"/>
                        </ImageView>
                    </graphic>
                    <tooltip>
                        <Tooltip text="Отменить"/>
                    </tooltip>
                </Button>
                <Button fx:id="redoBtn" styleClass="tool-button">
                    <graphic>
                        <ImageView fitWidth="24" fitHeight="24" pickOnBounds="true" preserveRatio="true">
                            <Image url="@../images/redo.png"/>
                        </ImageView>
                    </graphic>
                    <tooltip>
                        <Tooltip text="Повторить"/>
                    </tooltip>
                </Button>
                <Button fx:id="lineToolBtn" styleClass="tool-button">
                    <graphic>
                        <ImageView fitWidth="24" fitHeight="24" pickOnBounds="true" preserveRatio="true">
                            <Image url="@../images/line.png"/>
                        </ImageView>
                    </graphic>
                    <tooltip>
                        <Tooltip text="Линия"/>
                    </tooltip>
                </Button>
                <Button fx:id="rectToolBtn" styleClass="tool-button">
                    <graphic>
                        <ImageView fitWidth="24" fitHeight="24" pickOnBounds="true" preserveRatio="true">
                            <Image url="@../images/rectangle.png"/>
                        </ImageView>
                    </graphic>
                    <tooltip>
                        <Tooltip text="Прямоугольник"/>
                    </tooltip>
                </Button>
                <Button fx:id="ellipseToolBtn" styleClass="tool-button">
                    <graphic>
                        <ImageView fitWidth="24" fitHeight="24" pickOnBounds="true" preserveRatio="true">
                            <Image url="@../images/ellipse.png"/>
                        </ImageView>
                    </graphic>
                    <tooltip>
                        <Tooltip text="Эллипс"/>
                    </tooltip>
                </Button>
                <Button fx:id="rhombusToolBtn" styleClass="tool-button">
                    <graphic>
                        <ImageView fitWidth="24" fitHeight="24" pickOnBounds="true" preserveRatio="true">
                            <Image url="@../images/valve.png"/>
                        </ImageView>
                    </graphic>
                    <tooltip>
                        <Tooltip text="Кран"/>
                    </tooltip>
                </Button>
                <Button fx:id="textToolBtn" styleClass="tool-button">
                    <graphic>
                        <ImageView fitWidth="24" fitHeight="24" pickOnBounds="true" preserveRatio="true">
                            <Image url="@../images/text.png"/>
                        </ImageView>
                    </graphic>
                    <tooltip>
                        <Tooltip text="Текст"/>
                    </tooltip>
                </Button>
                <Button fx:id="addDeviceToolBtn" styleClass="tool-button">
                    <graphic>
                        <ImageView fitWidth="24" fitHeight="24" pickOnBounds="true" preserveRatio="true">
                            <Image url="@../images/add.png"/>
                        </ImageView>
                    </graphic>
                    <tooltip>
                        <Tooltip text="Добавить прибор"/>
                    </tooltip>
                </Button>
                <Separator/>
                <Label text="Выберите прибор:" styleClass="select-label"/>
                <ComboBox fx:id="deviceComboBox" prefWidth="200"/>
            </ToolBar>
            </HBox>
        </VBox>
    </top>
    <!-- Центральная область: холст схемы -->
    <center>
        <ScrollPane>
            <AnchorPane fx:id="schemePane"
                        styleClass="scheme-pane"
                        prefWidth="800"
                        prefHeight="600"
                        onMousePressed="#onPaneMousePressed"
                        onMouseDragged="#onPaneMouseDragged"
                        onMouseReleased="#onPaneMouseReleased">
                <!-- Здесь будут динамически добавляться линии, фигуры, приборы -->
            </AnchorPane>
        </ScrollPane>
    </center>
    <!-- Нижняя панель: статус -->
    <bottom>
        <HBox styleClass="bottom">
            <Label fx:id="statusLabel" text="Готово к редактированию" styleClass="status-label"/>
        </HBox>
    </bottom>
</BorderPane>