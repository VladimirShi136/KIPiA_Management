<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<BorderPane xmlns="http://javafx.com/javafx/23" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.kipia.management.kipia_management.controllers.MainController">
    <!-- Верхняя панель - заголовок -->
    <top>
        <HBox alignment="CENTER" style="-fx-background-color: #2c3e50; -fx-padding: 10;">
            <Label style="-fx-text-fill: white; -fx-font-size: 20px; -fx-font-weight: bold;"
                   text="Учёт приборов КИПиА"/>
        </HBox>
    </top>
    <!-- Левая панель - навигация -->
    <left>
        <VBox spacing="10" style="-fx-background-color: #34495e; -fx-padding: 10;">
            <Button fx:id="devicesBtn" maxWidth="Infinity" onAction="#showDevices"
                    style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold;" text="Приборы"/>
            <Button fx:id="addDeviceBtn" maxWidth="Infinity" onAction="#showAddDeviceForm"
                    style="-fx-background-color: #2ecc71; -fx-text-fill: white; -fx-font-weight: bold;"
                    text="Добавить прибор"/>
            <Button fx:id="reportsBtn" maxWidth="Infinity" onAction="#showReports"
                    style="-fx-background-color: #e67e22; -fx-text-fill: white; -fx-font-weight: bold;" text="Отчёты"/>
            <Region VBox.vgrow="ALWAYS"/>
            <!-- Новая кнопка для переключателя темы -->
            <Button fx:id="themeToggleBtn" maxWidth="1.7976931348623157E308" onAction="#toggleTheme"
                    style="-fx-background-color: #7f8c8d; -fx-text-fill: white;" text="Тёмная тема"/>
            <Button fx:id="exitBtn" maxWidth="Infinity" onAction="#exitApp"
                    style="-fx-background-color: #e74c3c; -fx-text-fill: white;" text="Выход"/>
        </VBox>
    </left>
    <!-- Центральная область - содержимое -->
    <center>
        <VBox fx:id="contentArea" spacing="15" style="-fx-padding: 10;">
            <!-- Панель поиска и удаления (добавлена для просмотра устройств) -->
            <HBox fx:id="searchAndDeletePane" managed="false" spacing="10" visible="false">
                <Label style="-fx-font-weight: bold;" text="Поиск:"/>
                <TextField fx:id="searchField" prefWidth="300.0" promptText="Введите название, тип или место установки"
                           style="-fx-background-color: #ecf0f1; -fx-border-color: #bdc3c7;"/>
                <Button fx:id="deleteButton" onAction="#deleteSelectedDevice"
                        style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-font-weight: bold;"
                        text="Удалить выбранный прибор"/>
            </HBox>
            <!-- Статистика (дообработана для скрытия по дефолту и динамического обновления) -->
            <VBox fx:id="statisticsPane" managed="false" spacing="5"
                  style="-fx-padding: 20; -fx-background-color: #f8f9fa; -fx-border-color: #ddd; -fx-border-radius: 5;"
                  visible="false">
                <Label style="-fx-font-weight: bold;" text="Статистика:"/>
                <HBox spacing="20">
                    <VBox alignment="CENTER">
                        <Label fx:id="totalDevicesLabel" style="-fx-font-size: 24px; -fx-text-fill: #1e74e4;"
                               text="--"/>
                        <Label text="Всего приборов"/>
                    </VBox>
                    <VBox alignment="CENTER">
                        <Label fx:id="workingDevicesLabel" style="-fx-font-size: 24px; -fx-text-fill: #2ecc71;"
                               text="--"/>
                        <Label text="В работе"/>
                    </VBox>
                    <VBox alignment="CENTER">
                        <Label fx:id="storageDevicesLabel" style="-fx-font-size: 24px; -fx-text-fill: #e74c3c;"
                               text="--"/>
                        <Label text="Хранение"/>
                    </VBox>
                    <VBox alignment="CENTER">
                        <Label fx:id="lostDevicesLabel" style="-fx-font-size: 24px; -fx-text-fill: #706b69;"
                               text="--"/>
                        <Label text="Утерян"/>
                    </VBox>
                    <VBox alignment="CENTER">
                        <Label fx:id="brokenDevicesLabel" style="-fx-font-size: 24px; -fx-text-fill: #ef8a06;"
                               text="--"/>
                        <Label text="Испорчен"/>
                    </VBox>
                </HBox>
            </VBox>
        </VBox>
    </center>
    <!-- Нижняя панель - статус -->
    <bottom>
        <HBox alignment="CENTER_LEFT" style="-fx-background-color: #ecf0f1; -fx-padding: 5;">
            <Label fx:id="statusLabel" text="Готов к работе"/>
        </HBox>
    </bottom>
</BorderPane>
